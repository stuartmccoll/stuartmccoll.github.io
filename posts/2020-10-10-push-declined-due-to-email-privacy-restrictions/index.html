<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Stuart McColl "><meta name=description content="This is a quick blog post detailing what to do if you receive the push declined due to email privacy restrictions error when attempting to push to a GitHub repository.
The error message tells us that your GitHub account has been configured to disallow the pushing of commits which might reveal a personal email address.
This means that in order to push commits to this remote repository, you&amp;rsquo;ll need to do one of two things:"><meta name=keywords content="homepage,blog,development,programming"><meta name=robots content="noodp"><link rel=canonical href=https://stuartmccoll.github.io/posts/2020-10-10-push-declined-due-to-email-privacy-restrictions/><title>The Push Declined Due to Email Privacy Restrictions error :: Stuart McColl</title><link rel=stylesheet href=/main.min.15c204e66791e2f70ca06e7872b0ed743b4d2392b3c6dc31ba8dbd9f3d4618d2.css><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=/favicon.ico><meta name=theme-color content="#252627"><meta itemprop=name content="The Push Declined Due to Email Privacy Restrictions error"><meta itemprop=description content="This is a quick blog post detailing what to do if you receive the push declined due to email privacy restrictions error when attempting to push to a GitHub repository.
The error message tells us that your GitHub account has been configured to disallow the pushing of commits which might reveal a personal email address.
This means that in order to push commits to this remote repository, you&rsquo;ll need to do one of two things:"><meta itemprop=datePublished content="2020-10-10T11:41:22+01:00"><meta itemprop=dateModified content="2020-10-10T11:41:22+01:00"><meta itemprop=wordCount content="402"><meta itemprop=image content="https://stuartmccoll.github.io"><meta itemprop=keywords content><meta property="article:published_time" content="2020-10-10 11:41:22 +0100 +0100"><script type=text/javascript>!function(b,d,a){var e=b.location,o="script",n="instrumentationKey",g="ingestionendpoint",k="disableExceptionTracking",i="ai.device.",j="toLowerCase",h="crossOrigin",l="POST",m="appInsightsSDK",f=a.name||"appInsights",c;(a.name||b[m])&&(b[m]=f),c=b[f]||function(f){var z=!1,q=!1,c={initialize:!0,queue:[],sv:"5",version:2,config:f},r,s,m,x,y,B,p,A;function w(b,f){var a={},d="Browser";return a[i+"id"]=d[j](),a[i+"type"]=d,a["ai.operation.name"]=e&&e.pathname||"_unknown_",a["ai.internal.sdkVersion"]="javascript:snippet_"+(c.sv||c.version),{time:function(){var a=new Date;function b(b){var a=""+b;return 1===a.length&&(a="0"+a),a}return a.getUTCFullYear()+"-"+b(1+a.getUTCMonth())+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+((a.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:b,name:"Microsoft.ApplicationInsights."+b.replace(/-/g,"")+"."+f,sampleRate:100,tags:a,data:{baseData:{ver:2}}}}if(r=f.url||a.src,r){function u(x){var h,i,t,u,v,s,o,p,k,d,m;z=!0,c.queue=[],q||(q=!0,h=r,o=function(){var a={},d=f.connectionString,e,b,c,h,i;if(d)for(e=d.split(";"),b=0;b<e.length;b++)c=e[b].split("="),2===c.length&&(a[c[0][j]()]=c[1]);return a[g]||(h=a.endpointsuffix,i=h?a.location:null,a[g]="https://"+(i?i+".":"")+"dc."+(h||"services.visualstudio.com")),a}(),p=o[n]||f[n]||"",k=o[g],d=k?k+"/v2/track":f.endpointUrl,(m=[]).push((i="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",t=h,u=d,(s=(v=w(p,"Exception")).data).baseType="ExceptionData",s.baseData.exceptions=[{typeName:"SDKLoadFailed",message:i.replace(/\./g,"-"),hasFullStack:!1,stack:i+"\nSnippet failed to load ["+t+"] -- Telemetry is disabled\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\nHost: "+(e&&e.pathname||"_unknown_")+"\nEndpoint: "+u,parsedStack:[]}],v)),m.push(function(g,f,d,e){var b=w(p,"Message"),c=b.data,a;return c.baseType="MessageData",a=c.baseData,a.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+d+")").replace(/\"/g,"")+'"',a.properties={endpoint:e},b}(0,0,h,d)),function(e,f){var d,c;JSON&&(d=b.fetch,d&&!a.useXhr?d(f,{method:l,body:JSON.stringify(e),mode:"cors"}):XMLHttpRequest&&(c=new XMLHttpRequest,c.open(l,f),c.setRequestHeader("Content-type","application/json"),c.send(JSON.stringify(e))))}(m,d))}function t(b,a){q||setTimeout(function(){!a&&c.core||u()},500)}s=function(){var b=d.createElement(o),c;return b.src=r,c=a[h],!c&&""!==c||"undefined"==b[h]||(b[h]=c),b.onload=t,b.onerror=u,b.onreadystatechange=function(c,a){"loaded"!==b.readyState&&"complete"!==b.readyState||t(0,a)},b}(),a.ld<0?d.getElementsByTagName("head")[0].appendChild(s):setTimeout(function(){d.getElementsByTagName(o)[0].parentNode.appendChild(s)},a.ld||0)}try{c.cookie=d.cookie}catch(a){}function v(a){for(;a.length;)!function(a){c[a]=function(){var b=arguments;z||c.queue.push(function(){c[a].apply(c,b)})}}(a.pop())}return m="track",x="TrackPage",y="TrackEvent",v([m+"Event",m+"PageView",m+"Exception",m+"Trace",m+"DependencyData",m+"Metric",m+"PageViewPerformance","start"+x,"stop"+x,"start"+y,"stop"+y,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),c.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4},B=(f.extensionConfig||{}).ApplicationInsightsAnalytics||{},!0!==f[k]&&!0!==B[k]&&(p="onerror",v(["_"+p]),A=b[p],b[p]=function(a,b,d,e,f){var g=A&&A(a,b,d,e,f);return!0!==g&&c["_"+p]({message:a,url:b,lineNumber:d,columnNumber:e,error:f}),g},f.autoExceptionInstrumented=!0),c}(a.cfg);function p(){a.onInit&&a.onInit(c)}(b[f]=c).queue&&0===c.queue.length?(c.queue.push(p),c.trackPageView({})):p()}(window,document,{src:"https://js.monitor.azure.com/scripts/b/ai.2.min.js",crossOrigin:"anonymous",cfg:{connectionString:"InstrumentationKey=74cc5c48-d066-4928-932e-459f438b579d;IngestionEndpoint=https://uksouth-1.in.applicationinsights.azure.com/;LiveEndpoint=https://uksouth.livediagnostics.monitor.azure.com/"}})</script></head><body><div class=container><header><section><h1 class=site-heading>Stuart McColl</h1><nav><ul><li><a href=/>Blog</a></li><li><a href=/about>About</a></li></ul></nav></section></header><hr><div class=content><main class=post><article><header><h1 class=post-title>The Push Declined Due to Email Privacy Restrictions error</h1><p class=post-date>October 10, 2020</p></header><hr class=post-rule><div class=post-content><p>This is a quick blog post detailing what to do if you receive the <code>push declined due to email privacy restrictions</code> error when attempting to push to a GitHub repository.</p><p>The error message tells us that your GitHub account has been configured to disallow the pushing of commits which might reveal a personal email address.</p><p>This means that in order to push commits to this remote repository, you&rsquo;ll need to do one of two things:</p><ol><li>Enable command line pushes that will expose a personal email address.</li><li>Or, configure Git to use your GitHub noreply address.</li></ol><p>I&rsquo;m going to assume that you&rsquo;ve configured your GitHub account to block command line pushes that expose a personal email address - however, if you didn&rsquo;t mean to do this and are happy to disable this setting then you can do so within the <a href=https://github.com/settings/emails>emails settings</a> in GitHub. Find the &lsquo;<em>Block command line pushes that expose my email</em>&rsquo; setting and disable it by unchecking the checkbox.</p><p>If you&rsquo;d like to keep this setting enabled and push commits to your remote repository, then you&rsquo;ll need to configure Git to use your GitHub no reply address. Let&rsquo;s start by grabbing that.</p><p>Head to the <a href=https://github.com/settings/profile>Settings</a> section of GitHub, and then select the <a href=https://github.com/settings/emails>Emails</a> menu item. In here, you&rsquo;ll find a checkbox labeled &lsquo;<em>Keep my email addresses private</em>&rsquo;. Within the description for this label, you&rsquo;ll find your GitHub noreply address. It&rsquo;ll be in the format <code>&lt;number>+&lt;your_github_username>@users.noreply.github.com</code>. Copy this to your clipboard, as we&rsquo;ll need it in a second.</p><p>In a terminal run the following command to add your GitHub noreply address to your global Git configuration:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>git config --global user.email &lt;number&gt;+&lt;your_github_username&gt;@users.noreply.github.com
</code></pre></div><p>With that in place, we&rsquo;re going to want to reset the author on your previous commit. If you only made <em>one</em> commit, then you&rsquo;ll want to run the following command:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>git commit --amend --reset-author
</code></pre></div><p>If you made multiple commits using your private email address, then you&rsquo;ll need to find the SHA for the commit <em>before</em> your first commit using your private email address. Once you have this, you&rsquo;ll want to run the following command (replacing <code>&lt;sha_of_previous_commit></code> with the SHA value found):</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>git rebase -i &lt;sha_of_previous_commit&gt; -x <span class=s2>&#34;git commit --amend --reset-author -CHEAD&#34;</span>
</code></pre></div><p>The <code>-x</code> parameter allows us to append a shell command after each line creating a commit in the final history.</p><p>Assuming everything worked okay, you&rsquo;ll now be able to run <code>git push</code> to push your commits to GitHub.</p></div></article></main></div><hr><footer><section><h3>More</h3><ul><li><a href=https://hachyderm.io/@stuartmccoll rel=me>Contact me on Mastodon</a></li><li>Spotted a bug in the site?
<a href=https://github.com/stuartmccoll/hugo-theme-refresh/issues/new>Raise an issue on GitHub</a></li><li>Get notifications of new posts by
<a href=https://stuartmccoll.github.io/index.xml>subscribing to my RSS feed</a></li><li>This static site was generated using
<a href=https://github.com/gohugoio/hugo/releases/tag/v0.83.1>Hugo version 0.83.1</a></li></ul></section><hr><section><h3>Attribution</h3><p xmlns:dct=http://purl.org/dc/terms/ xmlns:cc=http://creativecommons.org/ns# class=license-text>This blog post <span rel=dct:title>(The Push Declined Due to Email Privacy Restrictions error)</span> is licensed under
<a href=https://creativecommons.org/licenses/by/4.0>CC BY 4.0</a>. Any code contained within
this article may be subject to other licenses.</p></section></footer></div></body></html>