<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Stuart McColl "><meta name=description content="In this post, I&amp;rsquo;ll show you how to find and remove empty Azure resource groups using the Azure Az PowerShell module.
Install the Azure Az PowerShell module We&amp;rsquo;re going to follow this guide on Microsoft Learn to install the Azure Az PowerShell module.
I&amp;rsquo;m going to assume that you have the latest version of PowerShell installed. If you don&amp;rsquo;t, you can follow this guide on Microsoft Learn.
Run the following command in a PowerShell session:"><meta name=keywords content="homepage,blog,development,programming"><meta name=robots content="noodp"><link rel=canonical href=https://stuartmccoll.github.io/posts/2023-03-29-use-powershell-to-find-empty-azure-resource-groups/><title>Use PowerShell to find empty Azure resource groups :: Stuart McColl</title><link rel=stylesheet href=/main.min.15c204e66791e2f70ca06e7872b0ed743b4d2392b3c6dc31ba8dbd9f3d4618d2.css><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=/favicon.ico><meta name=theme-color content="#252627"><meta itemprop=name content="Use PowerShell to find empty Azure resource groups"><meta itemprop=description content="In this post, I&rsquo;ll show you how to find and remove empty Azure resource groups using the Azure Az PowerShell module.
Install the Azure Az PowerShell module We&rsquo;re going to follow this guide on Microsoft Learn to install the Azure Az PowerShell module.
I&rsquo;m going to assume that you have the latest version of PowerShell installed. If you don&rsquo;t, you can follow this guide on Microsoft Learn.
Run the following command in a PowerShell session:"><meta itemprop=datePublished content="2023-03-29T20:00:00+01:00"><meta itemprop=dateModified content="2023-03-29T20:00:00+01:00"><meta itemprop=wordCount content="234"><meta itemprop=image content="https://stuartmccoll.github.io"><meta itemprop=keywords content="Microsoft Azure,PowerShell,"><meta property="article:section" content="Microsoft Azure"><meta property="article:section" content="PowerShell"><meta property="article:published_time" content="2023-03-29 20:00:00 +0100 +0100"></head><body><div class=container><header><section><h1 class=site-heading>Stuart McColl</h1><nav><ul><li><a href=/>Blog</a></li><li><a href=/about>About</a></li></ul></nav></section></header><hr><div class=content><main class=post><article><header><h1 class=post-title>Use PowerShell to find empty Azure resource groups</h1><p class=post-date>March 29, 2023</p></header><hr class=post-rule><div class=post-content><p>In this post, I&rsquo;ll show you how to find and remove empty Azure resource groups
using the Azure Az PowerShell module.</p><h2 id=install-the-azure-az-powershell-module>Install the Azure Az PowerShell module</h2><p>We&rsquo;re going to follow <a href=https://learn.microsoft.com/en-us/powershell/azure/install-az-ps>this guide on Microsoft Learn</a>
to install the Azure Az PowerShell module.</p><p>I&rsquo;m going to assume that you have the latest version of PowerShell installed.
If you don&rsquo;t, you can follow <a href=https://learn.microsoft.com/en-us/powershell/scripting/install/installing-powershell>this guide on Microsoft Learn</a>.</p><p>Run the following command in a PowerShell session:</p><div class=highlight><pre class=chroma><code class=language-powershell data-lang=powershell><span class=nb>Install-Module</span> <span class=n>-Name</span> <span class=n>Az</span> <span class=n>-Scope</span> <span class=n>CurrentUser</span> <span class=n>-Repository</span> <span class=n>PsGallery</span> <span class=n>-Force</span>
</code></pre></div><p>You&rsquo;ll need to authenticate Azure PowerShell by signing in with your Azure
credentials.</p><div class=highlight><pre class=chroma><code class=language-powershell data-lang=powershell><span class=nb>Connect-AzAccount</span>
</code></pre></div><h2 id=using-the-get-azresourcegroup-cmdlet>Using the <code>Get-AzResourceGroup</code> cmdlet</h2><p>You can run the <code>Get-AzResourceGroup</code> cmdlet without any options to retrieve
all Azure resource groups within your connected Azure account.</p><p>We&rsquo;ll use this cmdlet in tandem with the <code>Get-AzResource</code> cmdlet to retrieve
the names of all resource groups that do not have associated resources.</p><div class=highlight><pre class=chroma><code class=language-powershell data-lang=powershell><span class=nb>Get-AzResourceGroup</span> <span class=p>|</span> <span class=nb>ForEach-Object</span> <span class=p>{</span> <span class=k>if</span> <span class=p>(!(</span><span class=nb>Get-AzResource</span> <span class=n>-ResourceGroupName</span> <span class=nv>$_</span><span class=p>.</span><span class=n>ResourceGroupName</span><span class=p>))</span> <span class=p>{</span> <span class=nb>Write-Host</span> <span class=nv>$_</span><span class=p>.</span><span class=n>ResourceGroupName</span> <span class=p>}</span> <span class=p>}</span>
</code></pre></div><p>This can be taken a step further to remove any resource groups that are found
to have no associated resources, by using the <code>Remove-AzResourceGroup</code> cmdlet.</p><div class=highlight><pre class=chroma><code class=language-powershell data-lang=powershell><span class=nb>Get-AzResourceGroup</span> <span class=p>|</span> <span class=nb>ForEach-Object</span> <span class=p>{</span> <span class=k>if</span> <span class=p>(!(</span><span class=nb>Get-AzResource</span> <span class=n>-ResourceGroupName</span> <span class=nv>$_</span><span class=p>.</span><span class=n>ResourceGroupName</span><span class=p>))</span> <span class=p>{</span> <span class=nb>Remove-AzResourceGroup</span> <span class=nv>$_</span><span class=p>.</span><span class=n>ResourceGroupName</span> <span class=p>}</span> <span class=p>}</span>
</code></pre></div><h2 id=further-reading>Further reading</h2><p>Further information on the <code>Get-AzResourceGroup</code> cmdlet can be found on
<a href=https://learn.microsoft.com/en-us/powershell/module/az.resources/get-azresourcegroup>Microsoft Learn</a>.</p><p>Further information on the <code>Remove-AzResourceGroup</code> cmdlet can be found on
<a href=https://learn.microsoft.com/en-us/powershell/module/az.resources/remove-azresourcegroup>Microsoft Learn</a>.</p><p>Further information on the <code>Get-AzResource</code> cmdlet can be found on
<a href=https://learn.microsoft.com/en-us/powershell/module/az.resources/get-azresource>Microsoft Learn</a>.</p></div></article></main></div><hr><footer><section><h3>More</h3><ul><li><a href=https://hachyderm.io/@stuartmccoll rel=me>Contact me on Mastodon</a></li><li>Spotted a bug in the site?
<a href=https://github.com/stuartmccoll/hugo-theme-refresh/issues/new>Raise an issue on GitHub</a></li><li>Get notifications of new posts by
<a href=https://stuartmccoll.github.io/index.xml>subscribing to my RSS feed</a></li><li>This static site was generated using
<a href=https://github.com/gohugoio/hugo/releases/tag/v0.83.1>Hugo version 0.83.1</a></li></ul></section><hr><section><h3>Attribution</h3><p xmlns:dct=http://purl.org/dc/terms/ xmlns:cc=http://creativecommons.org/ns# class=license-text>This blog post <span rel=dct:title>(Use PowerShell to find empty Azure resource groups)</span> is licensed under
<a href=https://creativecommons.org/licenses/by/4.0>CC BY 4.0</a>. Any code contained within
this article may be subject to other licenses.</p></section></footer></div></body></html>